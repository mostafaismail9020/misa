<%@ page trimDirectiveWhitespaces="true"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions"%>
<%@ taglib prefix="cms" uri="http://hybris.com/tld/cmstags"%>
<%@ taglib prefix="sec" uri="http://www.springframework.org/security/tags" %>
<%@ taglib prefix="spring" uri="http://www.springframework.org/tags" %>
<%@ taglib prefix="ycommerce" uri="http://hybris.com/tld/ycommercetags" %>


<c:if test="${component.visible}">
	<nav class="navigation navigation--bottom js_navigation--bottom js-enquire-offcanvas-navigation 1" role="navigation">
		<!-- <ul class="sticky-nav-top hidden-lg hidden-md js-sticky-user-group hidden-md hidden-lg">
      	<%--Dynamically generated by 'acc.navigation.js"--%>
    	</ul> -->
		<div class="navigation__overflow">
			<div class="container">
				<div class="row">
					<!-- <ul data-trigger="#signedInUserOptionsToggle" class="nav__links nav__links--products nav__links--mobile js-userAccount-Links js-nav-collapse-body offcanvasGroup1 collapse in hidden-md hidden-lg">
						<%--Dynamically generated by 'acc.navigation.js"--%>
					</ul> -->
					<div class="first">
						<div class="nav__right text-center login-area">
							<sec:authorize access="!hasAnyRole('ROLE_ANONYMOUS')">
								<cms:pageSlot position="HeaderLinks" var="headerLinks" limit="1">
									<cms:component component="${headerLinks}" />
								</cms:pageSlot>
								<%--<a href="<c:url value="/my-account/orders"/>">My Account</a>--%>
								<span>|</span>
								<a class="header-link" href="<c:url value="/logout"/>">Logout</a>
							</sec:authorize>
							<sec:authorize access="hasAnyRole('ROLE_ANONYMOUS')">
								<a class="header-link" href="<c:url value="/login"/>">Login</a>
							</sec:authorize>
							<img src="${commonResourcePath}/images/vision-2030.png" class="padd_left_10">
						</div>
						<c:if test="${bdUserGroup ne 'BDUserGroup'}">
							<div class="nav__right text-center header-search-area">
								<svg class="search-results-highlight_svg" xmlns="http://www.w3.org/2000/svg" width="19.931" height="19.931" viewBox="0 0 19.931 19.931"><g transform="translate(20.3 -3.7)"><path d="M20.736,12.618A8.118,8.118,0,1,1,12.618,4.5,8.118,8.118,0,0,1,20.736,12.618Z" transform="translate(-24 0)" fill="none" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.6"/><path d="M28.812,28.812l-3.837-3.837" transform="translate(-30.312 -6.312)" fill="none" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.6"/></g></svg>
							</div>
						</c:if>
						<div class="search-area">
							<form action="<c:url value="/search"/>" id="form-search"  onsubmit="if(!document.getElementById('invest-search').value) return false">
								<input type="text" name="text" id="invest-search" class="form-control">
								<svg xmlns="http://www.w3.org/2000/svg" onclick="if(document.getElementById('invest-search').value) document.getElementById('form-search').submit();" width="19.931" height="19.931" viewBox="0 0 19.931 19.931"><g transform="translate(20.3 -3.7)"><path d="M20.736,12.618A8.118,8.118,0,1,1,12.618,4.5,8.118,8.118,0,0,1,20.736,12.618Z" transform="translate(-24 0)" fill="none" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.6"/><path d="M28.812,28.812l-3.837-3.837" transform="translate(-30.312 -6.312)" fill="none" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.6"/></g></svg>
							</form>
						</div>
					</div>
					<div class="second" id="header">
								<div class="nav-menu">
										<div class="logo mr-auto">
											<cms:pageSlot position="SiteLogo" var="logo" limit="1">
												<cms:component component="${logo}" element="div" class="yComponentWrapper"/>
											</cms:pageSlot>
									</div>
								<ul>
								<c:forEach items="${component.navigationNode.children}" var="childLevel1" varStatus="childLevel1index">
										<c:set var="childlevel1link" value="${childLevel1.cmsLink}" />
										<li class="nav-item dropdown" >
											<c:choose>
													<c:when test="${not empty childlevel1link.url}">
														<img src="/investsaudistorefront/_ui/responsive/common/images/mobile-navarrow.png" class="d-none mobile-nav">
														<cms:component component="${childlevel1link}" evaluateRestriction="true" element="div"
																class="nav-link dropdown dropdown-toggle" />
													</c:when>
													<c:otherwise>
														<img src="/investsaudistorefront/_ui/responsive/common/images/mobile-navarrow.png" class="d-none mobile-nav">
														<cms:component component="${childlevel1link}" evaluateRestriction="true" element="div"
																	class="nav-link dropdown-toggle" />
													</c:otherwise>
											</c:choose>
											<ul class="dropdown-menu dropdown-large">
													<div class="row g-3">
														<div class="col-md-5 menu-img-item">
																<img class="img-fluid w-100" src="${fn:escapeXml(childLevel1.nodeImage.url)}" alt="">
																<p>${childLevel1.nodeDescription}</p>
														</div>

								<div class="col-md-4 menu-img-item">
															<c:if test="${not empty childLevel1.children}">
																	<c:forEach items="${childLevel1.children}" var="childLevel2" varStatus="childLevel2index">
																		<c:set var="childlevel2link" value="${childLevel2.cmsLink}" />
																		<c:choose>
																				<c:when test="${not empty childlevel2link.url}">
																					<li class="third-menu">
																						<c:if test="${childlevel2link.linkName eq 'VIRTUAL MEETINGS'}">
																							<a class="get_submenus" href="${childlevel2link.url}"
																										title="${childlevel2link.linkName}">${childlevel2link.linkName}</a>
																							</c:if>
																							<c:if test="${childlevel2link.linkName ne 'VIRTUAL MEETINGS'}">
																								<a class="get_submenus" href="${encodedContextPath}${childlevel2link.url}"
																										title="${childlevel2link.linkName}">${childlevel2link.linkName}</a>
																							</c:if>
																							<c:if test="${not empty childLevel2.links}">
																								<ul class="thirdlevel-menu">
																										<c:forEach items="${childLevel2.links}" var="childlevel3link">
																											<c:choose>
																													<c:when test="${not empty childlevel3link.url}">
																														<li><a class="get_submenus" href="${encodedContextPath}${childlevel3link.url}">${childlevel3link.linkName}</a></li>
																													</c:when>
																													<c:otherwise>
																														<li><a class="get_submenus" href="${encodedContextPath}${portal.cmsLinkUrl(childlevel3link)}">${childlevel3link.linkName}</a></li>
																													</c:otherwise>
																											</c:choose>
																										</c:forEach>
																								</ul>
																							</c:if>
																					</li>
																				</c:when>
																				<c:otherwise>
																					<li>
																						<cms:component component="${childlevel2link}" evaluateRestriction="true" element="span" class="get_submenus" />
																						<c:if test="${not empty childLevel2.links}">
																								<ul class="submenu dropdown-menu get_submenus">
																									<c:forEach items="${childLevel2.links}" var="childlevel3link">
																											<c:choose>
																												<c:when test="${not empty childlevel3link.url}">
																														<li><a class="get_submenus" href="${encodedContextPath}${childlevel3link.url}">${childlevel3link.linkName}</a></li>
																												</c:when>
																												<c:otherwise>
																														<li><a class="get_submenus" href="${encodedContextPath}${portal.cmsLinkUrl(childlevel3link)}">${childlevel3link.linkName}</a></li>
																												</c:otherwise>
																											</c:choose>
																									</c:forEach>
																								</ul>
																						</c:if>
																					</li>
																			</c:otherwise>
																		</c:choose>
																</c:forEach>
														</c:if>
											</div>
													</div>
											</ul>
										</li>
								</c:forEach>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
	</nav>
</c:if>

<script src="/investsaudistorefront/_ui/responsive/common/js/jquery-3.2.1.min.js"></script>
<script>
  $(function() {
    $('body').click(function(){
      $(".nav-item.dropdown.open", this).removeClass('open')
    });
    $('.nav-item.dropdown').click(function(){
      $('.mt-breadcrumb').addClass('z-none');
      $('body:not(.page-homepage) .banner-heading').addClass('z-none');
    });
  });
  $(document).ready(function () {
    $(".breadcrumb-plp").addClass('d-none');
    var header_menu = $("#header .nav-menu >ul >li");
		for(var i=0;i<header_menu.length;i++){
		var $this = $(header_menu)[i];
		var size = $($this).children('div.nav-link.dropdown.dropdown-toggle').length;
		if (size === 0)
			$($this).hide();
		}
  });
  $(document).ready(function(){
    $(window).scroll(function() {
      if ($(this).scrollTop() > 100) {
        $(".navigation__overflow").addClass("header-banner").fadeIn('slow');
        $(".breadcrumb-section").addClass("mt-breadcrumb").fadeIn('slow');
        $("body:not(.page-homepage) .banner-heading").addClass("d-none").fadeIn('slow');
        $(".main__inner-wrapper").addClass("scrolled-body").fadeIn('slow');
      } else {
        $(".navigation__overflow").removeClass("header-banner").fadeIn('slow');
        $(".breadcrumb-section").removeClass("mt-breadcrumb").fadeIn('slow');
        $("body:not(.page-homepage) .banner-heading").removeClass("d-none").fadeIn('slow');
        $(".main__inner-wrapper").removeClass("scrolled-body").fadeIn('slow');
      }
    });
    if ($(window).scrollTop() > 100) {
      $(".navigation__overflow").addClass("header-banner").fadeIn('slow');
      $(".breadcrumb-section").addClass("mt-breadcrumb").fadeIn('slow');
      $("body:not(.page-homepage) .banner-heading").addClass("d-none").fadeIn('slow');
      $(".main__inner-wrapper").addClass("scrolled-body").fadeIn('slow');
    }
  });
</script>